<br>
<div class="example-container mat-elevation-z8">
  @if (isLoadingResults) {
    <div class="example-loading-shade">
      @if (isLoadingResults) {
       <!-- <mat-spinner></mat-spinner>-->
       <ngx-spinner type="ball-scale-multiple"></ngx-spinner>

      }      
    </div>
  }

  <div class="example-table-container">

    <table mat-table [dataSource]="data" class="example-table"
           matSort matSortActive="LineNo" matSortDisableClear matSortDirection="asc">


          <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
       <th mat-header-cell *matHeaderCellDef>
         <!-- <mat-checkbox
            (change)="masterToggle()"
            [checked]="isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()"
            [aria-label]="checkboxLabel()">
          </mat-checkbox> -->
        </th> 
        <td mat-cell *matCellDef="let row">
          <mat-checkbox
            (click)="$event.stopPropagation()"
            (change)="onCheckboxChange($event, row)"
            [checked]="selection.isSelected(row)"
            [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>
     
      <ng-container matColumnDef="LineNo">
        <th mat-header-cell *matHeaderCellDef>Line#</th>
        <td mat-cell *matCellDef="let row">{{row.LineNo}}</td>
      </ng-container>

    <!--  <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let row">{{row.Status}}</td>
      </ng-container>
     
     <ng-container matColumnDef="RowId">
        <th mat-header-cell *matHeaderCellDef>Row ID</th>
        <td mat-cell *matCellDef="let row">{{row.RowId}}</td>
      </ng-container>  -->

      <ng-container matColumnDef="SupplierNo">
        <th mat-header-cell *matHeaderCellDef>Supplier No</th>
        <td mat-cell *matCellDef="let row">{{row.SupplierNo}}</td>
      </ng-container>

      
      <ng-container matColumnDef="SupplierName">
        <th mat-header-cell *matHeaderCellDef>Supplier Name</th>
        <td mat-cell *matCellDef="let row">{{row.SupplierName}}</td>
      </ng-container>

      <ng-container matColumnDef="Returned">
        <th mat-header-cell *matHeaderCellDef>Returned</th>
        <td mat-cell *matCellDef="let row">{{row.Returned}}</td>
      </ng-container>

      <ng-container matColumnDef="PartNo">
        <th mat-header-cell *matHeaderCellDef>Part No</th>
        <td mat-cell *matCellDef="let row">{{row.PartNo}}</td>
      </ng-container>

    <!--  <ng-container matColumnDef="PartSuffix">
        <th mat-header-cell *matHeaderCellDef>Part Suffix</th>
        <td mat-cell *matCellDef="let row">{{row.PartSuffix}}</td>
      </ng-container>-->

      <ng-container matColumnDef="PartDescription">
        <th mat-header-cell *matHeaderCellDef>Part Description</th>
        <td mat-cell *matCellDef="let row">{{row.PartDescription}}</td>
      </ng-container>
      

      <ng-container matColumnDef="PartKeyword">
        <th mat-header-cell *matHeaderCellDef>Part Keyword</th>
        <td mat-cell *matCellDef="let row">{{row.PartKeyword}}</td>
      </ng-container>


      <ng-container matColumnDef="QtyReceived">
        <th mat-header-cell *matHeaderCellDef>Qty Received</th>
        <td mat-cell *matCellDef="let row">{{row.QtyReceived | number: '1.0-0'}}</td>
      </ng-container>

      <ng-container matColumnDef="UnitPrice">
        <th mat-header-cell *matHeaderCellDef>Unit Price</th>
        <td mat-cell *matCellDef="let row">{{row.UnitPrice | number: '1.2-2' }}</td>
      </ng-container>

   <!--   <ng-container matColumnDef="OrderPrice">
        <th mat-header-cell *matHeaderCellDef>Order Price</th>
        <td mat-cell *matCellDef="let row">{{row.OrderPrice | number: '1.2-2'}}</td>
      </ng-container> -->

      <ng-container matColumnDef="TotalCost">
        <th mat-header-cell *matHeaderCellDef>Total Cost</th>
        <td mat-cell *matCellDef="let row">{{row.TotalCost | number: '1.2-2'}}</td>
      </ng-container>

      <ng-container matColumnDef="VAT">
        <th mat-header-cell *matHeaderCellDef>VAT</th>
        <td mat-cell *matCellDef="let row">{{row.VAT | number: '1.2-2' }}</td>
      </ng-container>      

      <ng-container matColumnDef="TotalCostIncVAT">
        <th mat-header-cell *matHeaderCellDef>TotalCost Inc. VAT</th>
        <td mat-cell *matCellDef="let row">{{row.TotalCostIncVAT | number: '1.2-2' }}</td>
      </ng-container>      


    <!--  <ng-container matColumnDef="Reference">
        <th mat-header-cell *matHeaderCellDef>Reference</th>
        <td mat-cell *matCellDef="let row">{{row.Reference}}</td>
      </ng-container>

      <ng-container matColumnDef="Location">
        <th mat-header-cell *matHeaderCellDef>Location</th>
        <td mat-cell *matCellDef="let row">{{row.Location}}</td>
      </ng-container>

      <ng-container matColumnDef="DateReceived">
        <th mat-header-cell *matHeaderCellDef>Date Received</th>
        <td mat-cell *matCellDef="let row">{{row.DateReceived}}</td>
      </ng-container>

      <ng-container matColumnDef="DateInserted">
        <th mat-header-cell *matHeaderCellDef>Date Inserted</th>
        <td mat-cell *matCellDef="let row">{{row.DateInserted}}</td>
      </ng-container> -->

      <ng-container matColumnDef="Site">
        <th mat-header-cell *matHeaderCellDef>Site</th>
        <td mat-cell *matCellDef="let row">{{row.Site}}</td>
      </ng-container>

   <!--   <ng-container matColumnDef="Invoiced">
        <th mat-header-cell *matHeaderCellDef>Invoiced</th>
        <td mat-cell *matCellDef="let row">{{row.Invoiced}}</td>
      </ng-container> -->

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <mat-paginator [length]="resultsLength" [pageSize]="pageSize" aria-label="Select page of LPO search results"></mat-paginator>

</div>

@if (resultsLength>0 && this.selectionLength>0){

  <div class="form-container">

    <div class="custom-sub-title"> Reset Posting</div>
    <br>
    
    <!-- Form Group -->
    <form [formGroup]="lpoResetPostingForm" (ngSubmit)="onSubmit()">
  
      <mat-form-field floatLabel="always">
        <mat-label>Total Invoice Value</mat-label>
       <b> <input matInput type="number" class="example-right-align" placeholder={{totalInvoiceValue.toFixed(2)}} /> </b>
        <span matTextPrefix>AED&nbsp;&nbsp;</span>
        <!--<span matTextSuffix>{{totalInvoiceValue}}</span>-->
      </mat-form-field>
  
      <mat-form-field floatLabel="always">
        <mat-label>Total VAT Value</mat-label>
        <input matInput type="number" class="example-right-align" placeholder={{totalVATValue.toFixed(2)}} />
        <span matTextPrefix>AED&nbsp;&nbsp;</span>
        <!--<span matTextSuffix>{{totalInvoiceValue}}</span>-->
      </mat-form-field>
  
      <mat-form-field floatLabel="always">
        <mat-label>Total Invoice Value With VAT </mat-label>
        <input matInput type="number" class="example-right-align" placeholder={{totalInvoiceValueWithVAT.toFixed(2)}} />
        <span matTextPrefix>AED&nbsp;&nbsp;</span>
        <!--<span matTextSuffix>{{totalInvoiceValue}}</span>-->
      </mat-form-field>
       
  
      <mat-form-field class="example-full-width" >
        <mat-label>Leave a remark</mat-label>
        <textarea matInput placeholder="" formControlName="remarks"></textarea>
      </mat-form-field>
  
     
      <button mat-raised-button color="primary" [disabled]="!lpoResetPostingForm.valid">Submit</button>
    </form>
  </div>

}





<br>
